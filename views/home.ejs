<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/project.css">
<link rel="stylesheet" href="/table.css">
<title>Our Game First Game</title>
</head>

<body>
<div id="wrapper">

<ul>
   <% if(!currentUser){ %>
	<ul style="text-align:right; float: right"><a href="/reg">Register</a></ul>
	<ul style="text-align:right; float: right"><a href="/login">Login</a></ul>
  <% } else { %>
  <ul style="text-align:right; float: right"><a href="/profile">Signed in as: <%= currentUser.name %></a></ul>
  <ul style="text-align:right; float: right"><a href="/logout">Logout</a></ul>
  <ul style="text-align:right; float: right"><a href="/cart">Cart</a></ul>
  <ul style="text-align:right; float: right"><a href="/library">Library</a></ul>
  <% } %>
</ul>
</br>

<div class="flashes">
  <% if (flashMessages) { %>
    <% } if (flashMessages.message_auth) { %>
      <div class="auth"><%= flashMessages.message_auth %></div>
    <% } else if (flashMessages.message_shop) { %>
      <div class="shop"><%= flashMessages.message_shop %></div>
    <% } else if (flashMessages.message_bought) { %>
      <div class="bought"><%= flashMessages.message_bought %></div>
    <% } else if (flashMessages.message_checkout) { %>
      <div class="checkout"><%= flashMessages.message_checkout %></div>
  <% } %>
</div>

<h1>
  <div align="center">Our First Game Store </div>
</h1>

<nav id="nav">
<ul>
	<li><a href="/home">Home</a></li>
    <li><a href="/new%20games">New Games</a></li>
    <li><a href="/top%20seller">Top Seller</a></li>
    <li><a href="/upcoming">Upcoming</a></li>

</br>
</br>
</br>
    <div class="search-container">
      <form>  

        <select name="Genre" class="css-input"> <option value="">Select Genre</option>

          <% genres.forEach(function(genre) { %>
            <option value="<%= genre.gameGenre %>"><%= genre.gameGenre %></option><br>
              <% }); %>

        </select>   
      <input type="text" placeholder="Search.." name="search" class="css-input">
      <button type="submit" name="SearchSubmit" class="button">Submit</button>
    </form>
  </br>
    
  </div>
</ul>
</nav>

<div id="division">

  <h2><b><i>New Games</i></b></h2>
  <% if (newgames.length > 0) { %>
      <table class="blueTable" border="1">
        <table border="1" class="blueTable">
          <col width = "257">
          <col width = "193">
          <col width = "257">
           <tr>
            <th style="text-align: center">Game Image</th>
            <th style="text-align: center">Game Title</th>
            <th style="text-align: center">Game Description</th>
            <th style="text-align: center">Game Price</th>
            <th style="text-align: center">Game Release Date</th>
         </tr>
         <% newgames.forEach((game) => { %>
             <tr>
             <td><a href="/game/<%= game.gameID %>"><img width="257" height= "126" src= "/<%= game.gameImage %>"></a></td>
             <td style="text-align: center"><%= game.gameTitle %></td>
             <td><%= game.gameDescription %></td>
             <td style="text-align: center"><%= game.price %></td>
             <% var formatted_date = game.releaseDate.getDate() + "-" + (game.releaseDate.getMonth() + 1) + "-" + game.releaseDate.getFullYear();%>
             <td style="text-align: center"><%= formatted_date %></td>
             </tr>
         <% }) %>
     </table>
  <% } %>  
  </p>
<p>
  <h2><b><i>Top Seller</i></b></h2>
  <% if (topsellergames.length > 0) { %>
      <table class="blueTable" border="1">
        <table border="1" class="blueTable">
          <col width = "257">
          <col width = "193">
          <col width = "257">
           <tr>
            <th style="text-align: center">Game Image</th>
            <th style="text-align: center">Game Title</th>
            <th style="text-align: center">Game Description</th>
            <th style="text-align: center">Game Price</th>
            <th style="text-align: center">Game Release Date</th>
         </tr>
         <% topsellergames.forEach((game) => { %>
             <tr>
             <td><a href="/game/<%= game.gameID %>"><img width="257" height= "126" src= "/<%= game.gameImage %>"></a></td>
             <td style="text-align: center"><%= game.gameTitle %></td>
             <td><%= game.gameDescription %></td>
             <td style="text-align: center"><%= game.price %></td>
             <% var formatted_date = game.releaseDate.getDate() + "-" + (game.releaseDate.getMonth() + 1) + "-" + game.releaseDate.getFullYear();%>
             <td style="text-align: center"><%= formatted_date %></td>
             </tr>
         <% }) %>
     </table>
  <% } %>  
  </p>
  
  <p>
  <h2><b><i>Upcoming</i></b></h2>
  <% if (upcominggames.length > 0) { %>
      <table class="blueTable" border="1">
        <table border="1" class="blueTable">
          <col width = "257">
          <col width = "193">
          <col width = "257">
           <tr>
            <th style="text-align: center">Game Image</th>
            <th style="text-align: center">Game Title</th>
            <th style="text-align: center">Game Description</th>
            <th style="text-align: center">Game Price</th>
            <th style="text-align: center">Game Release Date</th>
        </tr>
         <% upcominggames.forEach((game) => { %>
             <tr>
             <td><a href="/game/<%= game.gameID %>"><img width="257" height= "126" src= "/<%= game.gameImage %>"></a></td>
             <td style="text-align: center"><%= game.gameTitle %></td>
             <td><%= game.gameDescription %></td>
             <td style="text-align: center"><%= game.price %></td>
             <% var formatted_date = game.releaseDate.getDate() + "-" + (game.releaseDate.getMonth() + 1) + "-" + game.releaseDate.getFullYear();%>
             <td style="text-align: center"><%= formatted_date %></td>
             </tr>
         <% }) %>
     </table>
  <% } %>  
  </td></tr>
  </p>
  
</div>

<footer id="footer">
  <p>Copyright Â© 2020 Our First Game Store</p>
</footer>
</div>
</body>
</html>
